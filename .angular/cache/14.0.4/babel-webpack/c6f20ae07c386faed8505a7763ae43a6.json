{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { VisitType } from '../../../model/enums/visitType.enum.';\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nlet AddEditSectionComponent = class AddEditSectionComponent {\n  constructor(formBuilder, router, sectionService) {\n    this.formBuilder = formBuilder;\n    this.router = router;\n    this.sectionService = sectionService;\n    this.loading = false;\n    this.submitted = false;\n    this.visitTypes = [];\n  }\n\n  ngOnInit() {\n    for (let value in VisitType) if (typeof VisitType[value] === 'number') this.visitTypes.push(value);\n\n    this.id = +history.state.sectionId;\n    this.gymId = +sessionStorage.getItem('gymId');\n    this.isAddMode = !this.id;\n\n    if (!this.isAddMode) {\n      this.name = history.state.name;\n      this.type = VisitType[history.state.typeId];\n    }\n\n    this.form = this.formBuilder.group({\n      name: [this.isAddMode ? '' : this.name, Validators.required],\n      type: [this.visitTypes[0], this.isAddMode ? Validators.required : Validators.nullValidator]\n    });\n  }\n\n  get f() {\n    return this.form.controls;\n  }\n\n  onSubmit() {\n    this.submitted = true;\n\n    if (this.form.invalid) {\n      return;\n    }\n\n    this.loading = true;\n\n    if (this.isAddMode) {\n      this.createSection();\n    } else {\n      this.updateSection();\n    }\n  }\n\n  createSection() {\n    this.sectionService.add(this.f.name.value, +VisitType[this.f.type.value], this.gymId).subscribe(result => {\n      this.exit();\n    });\n  }\n\n  updateSection() {\n    this.sectionService.update(+this.id, this.f.name.value, +VisitType[this.f.type.value], this.gymId).subscribe(result => {\n      this.exit();\n    });\n  }\n\n  exit() {\n    this.router.navigate(['sections']);\n  }\n\n};\nAddEditSectionComponent = __decorate([Component({\n  templateUrl: 'add-edit-section.component.html'\n})], AddEditSectionComponent);\nexport { AddEditSectionComponent };","map":null,"metadata":{},"sourceType":"module"}