{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Roles } from './../../model/enums/roles.enum';\nimport { Component } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nlet SignUpComponent = class SignUpComponent {\n  constructor(formBuilder, route, router, authService) {\n    this.formBuilder = formBuilder;\n    this.route = route;\n    this.router = router;\n    this.authService = authService;\n    this.registerForm = new FormGroup({\n      username: new FormControl(''),\n      email: new FormControl(''),\n      password: new FormControl(''),\n      repeatPassword: new FormControl(''),\n      role: new FormControl('')\n    });\n    this.roles = [];\n    this.loading = false;\n    this.submitted = false;\n    this.error = '';\n  }\n\n  ngOnInit() {\n    for (let value in Roles) if (typeof Roles[value] === 'number') this.roles.push(value);\n\n    this.registerForm = this.formBuilder.group({\n      username: ['', Validators.required],\n      email: ['', Validators.required],\n      password: ['', Validators.required],\n      repeatPassword: ['', Validators.required],\n      role: [this.roles[1]]\n    }, {\n      validator: this.checkPasswords('password', 'repeatPassword')\n    });\n  }\n\n  checkPasswords(passwordKey, passwordConfirmationKey) {\n    return group => {\n      const passwordInput = group.controls[passwordKey],\n            passwordConfirmationInput = group.controls[passwordConfirmationKey];\n\n      if (passwordInput.value !== passwordConfirmationInput.value) {\n        return passwordConfirmationInput.setErrors({\n          notSame: true\n        });\n      } else {\n        return passwordConfirmationInput.setErrors(null);\n      }\n    };\n  }\n\n  get f() {\n    return this.registerForm.controls;\n  }\n\n  onSubmit() {\n    console.log(+Roles[this.f.role.value]);\n    this.submitted = true;\n\n    if (this.registerForm.invalid) {\n      return;\n    }\n\n    this.loading = true;\n    this.authService.signUp(this.f.username.value, this.f.email.value, this.f.password.value, this.f.repeatPassword.value, +Roles[this.f.role.value]);\n  }\n\n};\nSignUpComponent = __decorate([Component({\n  selector: 'app-sign-up',\n  templateUrl: './sign-up.component.html'\n})], SignUpComponent);\nexport { SignUpComponent };","map":null,"metadata":{},"sourceType":"module"}